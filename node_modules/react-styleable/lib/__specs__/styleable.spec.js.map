{"version":3,"sources":["../../src/__specs__/styleable.spec.js"],"names":["css","content","mkFixture","Subject","props","aDefault","Component","defaultProps","mkFixtureWithReqPropTypes","aReqProp","propTypes","string","isRequired","mkFunctionFixture","subject","mkFunctionFixtureWithReqPropTypes","describe","it","defaultStylesheet","component","renderIntoDocument","should","eql","throw","refs","not","have","property","origCss","overrideCss","unusedSelector","e","message","match","done","compose","newHash","findDOMNode","className","exist","children","textContent"],"mappings":"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","file":"styleable.spec.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport TestUtils from 'react-dom/test-utils'\nimport PropTypes from 'prop-types'\n\nimport styleable from '../styleable'\n\nconst css = {\n  content: 'someHashFromALocalCssModule'\n}\n\nfunction mkFixture(css) {\n  class Subject extends React.Component {\n    render() {\n      return (\n        <div className={this.props.css.content} ref=\"content\">\n          Content {this.props.aDefault}\n        </div>\n      )\n    }\n  }\n\n  Subject.defaultProps = {\n    aDefault: 'still here'\n  }\n\n  return styleable(css)(Subject)\n}\n\nfunction mkFixtureWithReqPropTypes() {\n  class Subject extends React.Component {\n    render() {\n      return (\n        <div className={this.props.css.content} ref=\"content\">\n          Req content {this.props.aReqProp}\n        </div>\n      )\n    }\n  }\n\n  Subject.propTypes = {\n    aReqProp: PropTypes.string.isRequired\n  }\n\n  return styleable(css)(Subject)\n}\n\nfunction mkFunctionFixture(css) {\n  function subject(props) {\n    return (\n      <div className={props.css.content}>\n        Content {props.aDefault}\n      </div>\n    )\n  }\n  subject.defaultProps = {\n    aDefault: 'still here'\n  }\n\n  return styleable(css)(subject)\n}\n\nfunction mkFunctionFixtureWithReqPropTypes() {\n  function subject(props) {\n    return (\n      <div className={props.css.content}>\n        Req content {props.aReqProp}\n      </div>\n    )\n  }\n  subject.propTypes = {\n    aReqProp: PropTypes.string.isRequired\n  }\n\n  return styleable(css)(subject)\n}\n\ndescribe('styleable', () => {\n  it('creates a default stylesheet if none supplied', () => {\n    const defaultStylesheet = {}\n    const Subject = mkFixture()\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.props.css.should.eql(defaultStylesheet)\n  })\n\n  describe('with invalid stylesheet', () => {\n    it('rejects css as strings', () => {\n      ;(() => {\n        const Subject = mkFixture('nonCssObj')\n        TestUtils.renderIntoDocument(<Subject />)\n      }).should.throw(/must be an object/)\n    })\n\n    it('rejects css as array', () => {\n      ;(() => {\n        const Subject = mkFixture(['css', 'stuff'])\n        TestUtils.renderIntoDocument(<Subject />)\n      }).should.throw(/must be an object/)\n    })\n  })\n\n  it('wraps the component in a component', () => {\n    const Subject = mkFixture()\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.refs.should.not.have.property('content')\n  })\n\n  describe('with invalid selectors (superset)', () => {\n    it('rejects override styles that wont be used', done => {\n      const origCss = { content: 'hash' }\n      const overrideCss = { unusedSelector: 'anotherHash' }\n      const Subject = mkFixture(origCss)\n      try {\n        TestUtils.renderIntoDocument(<Subject css={overrideCss} />)\n      } catch (e) {\n        /*\n          Using this instead of (() => {}).should.throw()\n          Because I was getting this error:\n           TypeError: Cannot call a class as a function\n             at _classCallCheck (lib/styleable.js:23:34)\n             at CssStyleComponent (lib/styleable.js:31:35)\n             at Context.<anonymous> (lib/__specs__/styleable.spec.js:64:41)\n         */\n        e.message.should.match(/provide only selectors/)\n        done()\n      }\n    })\n\n    it('rejects compose styles that wont be used', done => {\n      const origCss = { content: 'hash' }\n      const overrideCss = { compose: { unusedSelector: 'anotherHash' } }\n      const Subject = mkFixture(origCss)\n      try {\n        TestUtils.renderIntoDocument(<Subject css={overrideCss} />)\n      } catch (e) {\n        e.message.should.match(/provide only selectors/)\n        done()\n      }\n    })\n  })\n\n  it('overrides original stylesheet', () => {\n    const newHash = 'anotherHash'\n    const origCss = { content: 'hash' }\n    const overrideCss = { content: newHash }\n    const Subject = mkFixture(origCss)\n    var component = TestUtils.renderIntoDocument(<Subject css={overrideCss} />)\n    ReactDOM.findDOMNode(component).className.should.eql(newHash)\n  })\n\n  it('composes new css', () => {\n    const origCss = { content: 'hash' }\n    const overrideCss = { compose: { content: 'anotherHash' } }\n    const Subject = mkFixture(origCss)\n    var component = TestUtils.renderIntoDocument(<Subject css={overrideCss} />)\n    ReactDOM.findDOMNode(component).className.should.eql('hash anotherHash')\n  })\n\n  it('lets defaultProps pass through', () => {\n    const Subject = mkFixture()\n    Subject.defaultProps.aDefault.should.exist\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.props.aDefault.should.eql('still here')\n  })\n\n  it('lets propTypes pass through', () => {\n    const Subject = mkFixtureWithReqPropTypes()\n    Subject.propTypes.aReqProp.should.exist\n  })\n\n  describe('with stateless functions', () => {\n    it('makes the css prop available', () => {\n      const css = { content: 'cssHash' }\n      const Subject = mkFunctionFixture(css)\n      const component = TestUtils.renderIntoDocument(\n        <div>\n          <Subject />\n        </div>\n      )\n      ReactDOM.findDOMNode(component).children[0].className.should.eql(\n        css.content\n      )\n    })\n\n    it('allows overrides to the stylesheet', () => {\n      const newHash = 'anotherHash'\n      const origCss = { content: 'hash' }\n      const overrideCss = { content: newHash }\n      const Subject = mkFunctionFixture(origCss)\n      const component = TestUtils.renderIntoDocument(\n        <div>\n          <Subject css={overrideCss} />\n        </div>\n      )\n      ReactDOM.findDOMNode(component).children[0].className.should.eql(newHash)\n    })\n\n    it('lets defaultProps pass through', () => {\n      const Subject = mkFunctionFixture()\n      Subject.defaultProps.aDefault.should.exist\n      const component = TestUtils.renderIntoDocument(\n        <div>\n          <Subject />\n        </div>\n      )\n      ReactDOM.findDOMNode(component).children[0].textContent.should.eql(\n        'Content still here'\n      )\n    })\n\n    it('lets propTypes pass through', () => {\n      const Subject = mkFunctionFixtureWithReqPropTypes()\n      /*\n        Not sure how to really test the real problem where warnings aren't\n        happening when a child component has been styleable'd. This at least\n        tests the fix for the real problem.\n      */\n      Subject.propTypes.aReqProp.should.exist\n    })\n  })\n})\n"]}